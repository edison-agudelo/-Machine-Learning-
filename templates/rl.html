<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Regresión Lineal - Satisfacción</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4 bg-light">
  <div class="container">
    <h1 class="mb-4">Regresión Lineal — Satisfacción de clientes</h1>

    <!-- Formulario -->
    <form method="post" class="row g-3 mb-4">
      <div class="col-md-4">
        <label class="form-label">⏱️ Tiempo de espera (min)</label>
        <input type="number" step="any" name="tiempo" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">⭐ Calidad del servicio (1-10)</label>
        <input type="number" step="any" name="calidad" class="form-control" required>
      </div>
      <div class="col-md-4 d-flex align-items-end">
        <button type="submit" class="btn btn-primary w-100">Predecir</button>
      </div>
    </form>

    <!-- Métricas del modelo -->
    {% if metrics %}
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title">📊 Métricas (modelo entrenado)</h5>
          <ul>
            <li>RMSE: {{ metrics.rmse|round(3) }}</li>
            <li>R²: {{ metrics.r2|round(3) }}</li>
          </ul>
        </div>
      </div>
    {% endif %}

    <!-- Gráfico -->
    {% if plot_url %}
      <div class="mb-4">
        <h5>📈 Gráfico (Satisfacción vs Tiempo de espera, coloreado por Calidad)</h5>
        <img src="{{ plot_url }}" class="img-fluid rounded shadow" alt="Gráfico de regresión">
      </div>
    {% endif %}

    <!-- Predicción -->
    {% if prediccion is not none %}
      <div class="alert alert-success fs-5">
        ✅ Predicción de satisfacción: <strong>{{ prediccion|round(2) }}</strong>
      </div>
    {% endif %}

    <!-- Dataset -->
    <div class="mt-4">
      <h5>📋 Muestra del dataset</h5>
      {% if data %}
        <div class="table-responsive">
          {{ data|safe }}
        </div>
      {% endif %}
    </div>

    <div class="mt-3">
      <a href="{{ url_for('index') }}" class="btn btn-secondary">⬅ Volver al inicio</a>
    </div>
  </div>
</body>
</html>
