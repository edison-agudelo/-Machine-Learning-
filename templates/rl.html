{% extends "base.html" %}

{% block content %}
<div class="container p-4 bg-light">
  <h1 class="mb-4">Regresión Lineal — Satisfacción de clientes</h1>

  <form method="post" class="row g-3 mb-4">
    <div class="col-md-4">
      <label class="form-label">Tiempo de espera (min)</label>
      <input type="number" step="any" name="tiempo" class="form-control" required>
    </div>
    <div class="col-md-4">
      <label class="form-label">Calidad del servicio (1-10)</label>
      <input type="number" step="any" name="calidad" class="form-control" required>
    </div>
    <div class="col-md-4 d-flex align-items-end">
      <button type="submit" class="btn btn-primary w-100">Predecir</button>
    </div>
  </form>

  {% if metrics %}
  <div class="card mb-4">
    <div class="card-body">
      <h5 class="card-title">Métricas (modelo entrenado)</h5>
      <ul>
        <li>RMSE: {{ metrics.rmse|round(3) }}</li>
        <li>R²: {{ metrics.r2|round(3) }}</li>
      </ul>
    </div>
  </div>
  {% endif %}

  {% if prediccion is not none %}
  <div class="alert alert-success fs-5">
     Predicción de satisfacción: <strong>{{ prediccion|round(2) }}</strong>
  </div>
  {% endif %}

  {% if plot_url %}
  <div class="mb-4">
    <h5> Gráfico (Satisfacción vs Tiempo de espera)</h5>
    <img src="{{ plot_url }}" class="img-fluid rounded shadow" alt="Gráfico de regresión">
  </div>
  {% endif %}

  {% if data %}
  <div class="mt-4">
    <h5> Dataset</h5>
    <div class="table-responsive">
      {{ data|safe }}
    </div>
  </div>
  {% endif %}

  <div class="mt-3">
    <a href="/" class="btn btn-secondary">⬅ Volver al inicio</a>
  </div>
</div>
{% endblock %}
